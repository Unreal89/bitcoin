Copyright (c) 2009-2011 Bitcoin Developers
Distributed under the MIT/X11 software license, see the accompanying
file license.txt or http://www.opensource.org/licenses/mit-license.php.
This product includes software developed by the OpenSSL Project for use in
the OpenSSL Toolkit (http://www.openssl.org/).  This product includes
cryptographic software written by Eric Young (eay@cryptsoft.com) and UPnP
software written by Thomas Bernard.

BUILDING FOR WIN32 ON LINUX
===========================

Compilers Supported
-------------------
MinGW

Dependencies
------------
Libraries you need to download separately and build:

                default path               download
wxWidgets       /wxwidgets-2.9.1           http://www.wxwidgets.org/downloads/
OpenSSL         /openssl-1.0.0d            http://www.openssl.org/source/
Berkeley DB     /db-4.7.25.NC              http://www.oracle.com/technology/software/products/berkeley-db/index.html
Boost           /boost_1_43_0              http://www.boost.org/users/download/
miniupnpc       /upnpc-exe-win32-20110215  http://miniupnp.tuxfamily.org/files/

Their licenses:
wxWidgets      LGPL 2.1 with very liberal exceptions
OpenSSL        Old BSD license with the problematic advertising requirement
Berkeley DB    New BSD license with additional requirement that linked software must be free open source
Boost          MIT-like license
miniupnpc      New (3-clause) BSD license

Versions used in this release:
wxWidgets    2.9.1
OpenSSL      1.0.0d
Berkeley DB  4.7.25.NC
Boost        1.43.0
miniupnpc    1.5-20110215

Notes
-----
The UI layout is edited with wxFormBuilder.  The project file is
uiproject.fbp.  It generates uibase.cpp and uibase.h, which define base
classes that do the rote work of constructing all the UI elements.

These instructions are designed based on the Ubuntu MinGW packages.
For most (all?) others, you will neeed to modify aspects of the commands.

You can set the path which contains the dependencies by setting DEPSDIR.

wxWidgets
---------
cd /wxWidgets-2.9.1/
./configure --host=i586-mingw32msvc --build=i686-linux --disable-shared --enable-monolithic --enable-debug --without-libpng --disable-svg
make

OpenSSL
-------
cd /openssl-1.0.0d
./config -cross-compile-prefix=i586-mingw32msvc- mingw
make

perl util/mkdef.pl 32 libeay enable-static-engine > libeay32.def
i586-mingw32msvc-dllwrap --dllname libeay32.dll --output-lib libeay32.a --def libeay32.def libcrypto.a -lws2_32 -lgdi32

after that openssl libeay is in main source dir (openssl-1.0.0d)

Berkeley DB
-----------
cd /db-4.7.25.NC/build_unix
../dist/configure --enable-mingw --enable-cxx --host=i586-mingw32msvc CFLAGS="-I/usr/i586-mingw32msvc/include"
make


Boost
-----
cd /boost_1_43_0
echo "using gcc : 4.4 : i586-mingw32msvc-g++
        :
        <rc>i586-mingw32msvc-windres
        <archiver>i586-mingw32msvc-ar
;" > user-config.jam
./bootstrap.sh --without-icu
./bjam toolset=gcc target-os=windows threadapi=win32 threading=multi --user-config=user-config.jam --without-mpi --without-python -sNO_BZIP2=1 -sNO_ZLIB=1 --layout=tagged --build-type=complete stage

Note:
building with boost 1.45.0 failed because of boost ticket 4614, 4258 (marked fixed, but still causing issues)
builds fine with boost 1.43.0

MiniUPnPc
---------
Building miniupnpc failed on Windows Server 2003, thus it is expected that a binary copy will be used.
See http://miniupnp.tuxfamily.org/forum/viewtopic.php?t=642
UPnP support is optional, make with USE_UPNP= to disable it.

Get upnpc-exe-win32-20110215.zip and unzip it to /upnpc-exe-win32-20110215
Get miniupnpc-1.5.20110215.tar.gz and copy *.h to /upnpc-exe-win32-20110215/miniupnpc

Bitcoin
-------
cd /bitcoin
make bitcoin.exe bitcoind.exe -f makefile.linux-mingw
i586-mingw32msvc-strip bitcoin.exe
i586-mingw32msvc-strip bitcoind.exe
